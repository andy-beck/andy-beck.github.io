"use strict";app.controller("FooterCtrl",["$scope","$sce","settings",function(n,t,i){n.footer=t.trustAsHtml("&copy; 2008-"+(new Date).getFullYear()+" "+i.site_title)}]);app.controller("NavCtrl",["$scope","$location","$filter","sortData","settings","Analytics",function(n,t,i,r,u,f){n.title=u.site_title;r.getItems().then(function(t){n.categories=t.items.reduce(function(n,t){return n.indexOf(t.category)<0&&n.push(t.category),n},[])})["catch"](function(){n.error="unable to get the items"});n.$on("$routeChangeSuccess",function(){n.navShow=!0});n.getClass=function(n){return(f.trackPage(),n==="/")?t.path()==="/"?"active":"":t.path().substr(0,n.length)===n?"active":""};n.closeThis=function(){n.page.showSubNav(!1)}}]);app.controller("SocialCtrl",["$scope",function(n){n.socialUrl=function(n){window.open(n,"_blank")}}]);app.controller("subscribeCtrl",["$scope","$mdDialog",function(n,t){function i(n,t){n.closeDialog=function(){t.cancel()}}n.subscribe=function(n){t.show({targetEvent:n,controller:["$scope","$mdDialog",i],templateUrl:"partials/subscribe.html",openFrom:"#subscribe",closeTo:"#subscribe",clickOutsideToClose:!0})}}]);app.controller("PageCtrl",["$scope",function(n){n.page.setDirection("none")}]);app.controller("subscribeFormCtrl",["$scope","utilities","Analytics",function(n,t,i){i.trackEvent("subscribe","clicked");n.change=function(){var i=t.splitName(n.mailchimp.NAME);n.mailchimp.FNAME=i.first_name;n.mailchimp.LNAME=i.last_name}}]);app.controller("HomeCtrl",["$scope",function(n){n.page.setDirection("none")}]);app.controller("ContactCtrl",["$scope","utilities",function(n,t){n.page.setDirection("none");n.change=function(){var i=t.splitName(n.contact.NAME);n.contact.FNAME=i.first_name;n.contact.LNAME=i.last_name}}]);app.controller("NewsCtrl",["$scope","$http","settings",function(n,t,i){n.page.setDirection("none");var r=[];t.get("https://www.googleapis.com/blogger/v3/blogs/"+i.blog_id+"/posts?labels=news&maxResults=5&orderBy=published&key="+i.api_key).then(function(t){r=t.data.items;n.items=r})}]);app.controller("ListCtrl",["$scope","$filter","$routeParams","sortData",function(n,t,i,r){n.page.setDirection("none");r.getItems().then(function(r){n.items=t("filter")(r.items,{category:i.itemCategory});n.title=n.items[0].category;n.page.setTitle(n.title)})}]);app.controller("DetailCtrl",["$scope","$routeParams","$filter","$location","sortData","Analytics",function(n,t,i,r,u,f){this.shareOpen=!1;n.url=t.itemUrl;u.getItems().then(function(u){var e=i("filter")(u.items,{category:t.itemCategory}),o=i("filter")(e,{url:n.url},!0)[0],s=e.indexOf(o);n.prevItem=s>0?Number(s)-1:e.length-1;n.nextItem=s<e.length-1?Number(s)+1:0;n.page.setTitle(o.title);n.item=o;n.prev=e[n.prevItem];n.next=e[n.nextItem];f.trackPage("/gallery/"+o.category.toLowerCase()+"/"+o.url,o.title);n.getPrev=function(t){n.page.setDirection("forward");r.url("/gallery/"+e[t].category.toLowerCase()+"/"+e[t].url)};n.getNext=function(t){n.page.setDirection("backward");r.url("/gallery/"+e[t].category.toLowerCase()+"/"+e[t].url)};n.tweet=function(n){window.open("https://twitter.com/intent/tweet?url=http%3A%2F%2Fandybeck.co.uk/gallery/"+n.category.toLowerCase()+"/"+n.url+"%2F&text="+n.title+"&hashtags=andybeck,painting","_blank","width=600, height=260")};n.like=function(n){window.open("https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fandybeck.co.uk/gallery/"+n.category.toLowerCase()+"/"+n.url+"%2F","_blank","width=580, height=550")};n.pin=function(n){window.open("http://www.pinterest.com/pin/create/button/?url=http%3A%2F%2Fandybeck.co.uk/gallery/"+n.category.toLowerCase()+"/"+n.url+"&media=http%3A%2F%2Fandybeck.co.uk/images/"+n.image+".jpg&description=Andy+Beck+-+"+n.title,"_blank","width=750, height=540")}})}]);